<header>
  <h1>üöÄ Calibrate for All </h1>
</header>
<main>

  <div class="container">
    <!-- Left Section -->
    <div class="left-panel">
      <button (click)="addNewItem()">Add New Item</button>
  
      <table>
        <thead>
          <tr>
            <th>Item SN</th>
            <th>Item Type</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of items" 
              (click)="selectItem(item)" 
              [class.selected]="item === selectedItem">
            <td>{{ item.sn }}</td>
            <td>{{ item.type }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <!-- Right Section -->
    <div class="right-panel">
      <!-- Top Section -->
      <div class="top-section">
        <label>
          Item Type:
          <input [(ngModel)]="formItem.type" />
        </label>
        <label>
          Item SN:
          <input [(ngModel)]="formItem.sn" />
        </label>
        <div class="form-buttons">
          <button (click)="cancel()">Cancel</button>
          <button (click)="save()">Save</button>
        </div>
      </div>
  
      <!-- Divider -->
      <div class="divider"></div>
  
      <!-- Bottom Section -->
      <div class="bottom-section">
        <table class="actions-table">
          <thead>
            <tr>
              <th>Action</th>
              <th>Status</th>
              <th>Report</th>
              <th>Date</th>
              <th>Executed By</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let action of dynamicActions">
              <!-- Action Button -->
              <td>
                <button (click)="action.handler()">
                  {{ action.label }}
                </button>
              </td>
  
              <!-- Status Icon -->
              <td>
                <span [class.pass]="action.status === 'pass'"
                      [class.fail]="action.status === 'fail'"
                      [class.not-started]="action.status === 'not-started'">
                  ‚óè
                </span>
              </td>
  
              <!-- PDF Report Link -->
              <td>
                <ng-container *ngIf="action.status !== 'not-started'; else noData">
                  <a href="#" (click)="openPdf(action.reportUrl ?? ''); $event.preventDefault()">Open Report</a>
                </ng-container>
                <ng-template #noData>-</ng-template>
              </td>
  
              <!-- Execution Date -->
              <td>
                <ng-container *ngIf="action.status !== 'not-started'; else noData">
                  {{ action.date | date: 'short' }}
                </ng-container>
              </td>
  
              <!-- Executed By -->
              <td>
                <ng-container *ngIf="action.status !== 'not-started'; else noData">
                  {{ action.executedBy }}
                </ng-container>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
  
      <!-- PDF Viewer Panel -->
      <div *ngIf="selectedPdf" class="pdf-viewer">
        <h4>Report Viewer</h4>
        <iframe [src]="sanitizeUrl(selectedPdf)" width="100%" height="500px"></iframe>
        <button class="close-btn" (click)="closePdf()">Close</button>
      </div>
    </div>
  </div>
  
  

</main>